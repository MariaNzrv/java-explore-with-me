CREATE TABlE IF NOT EXISTS apps
(
    id    INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name  VARCHAR(100) NOT NULL,
    CONSTRAINT UQ_APPS_NAME UNIQUE (name)
);

CREATE TABlE IF NOT EXISTS endpoint_hist
(
    id                INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    app_id            INTEGER REFERENCES apps (id) ON DELETE CASCADE,
    uri               VARCHAR(2000) NOT NULL,
    ip                VARCHAR(15) NOT NULL,
    request_timestamp TIMESTAMP
);